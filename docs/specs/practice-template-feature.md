# ç·´ç¿’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ ä»•æ§˜æ›¸

## 1. æ¦‚è¦

### 1.1 èƒŒæ™¯
é€±3å›ä»¥ä¸Šç·´ç¿’ã™ã‚‹ãƒ˜ãƒ“ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦ã€æ¯å›åŒã˜ã‚ˆã†ãªç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ‰‹å…¥åŠ›ã™ã‚‹ã®ã¯éåŠ¹ç‡ã€‚ã‚ˆãä½¿ã†ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜ã—ã€ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§å‘¼ã³å‡ºã›ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚

### 1.2 ç›®çš„
- ç·´ç¿’è¨˜éŒ²ã®å…¥åŠ›æ™‚é–“ã‚’50%ä»¥ä¸Šå‰Šæ¸›
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¶™ç¶šåˆ©ç”¨ç‡å‘ä¸Š
- å…¥åŠ›ãƒŸã‚¹ã®å‰Šæ¸›

### 1.3 å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
- é€±3å›ä»¥ä¸Šç·´ç¿’è¨˜éŒ²ã‚’ã¤ã‘ã‚‹ç«¶æ³³é¸æ‰‹
- æ±ºã¾ã£ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ç¹°ã‚Šè¿”ã™ãƒ¦ãƒ¼ã‚¶ãƒ¼

### 1.4 ã‚¹ã‚³ãƒ¼ãƒ—
- **å¯¾è±¡**: Practice_Logï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼å˜ä½ï¼‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- **å¯¾è±¡å¤–**: Practiceï¼ˆæ—¥å˜ä½ï¼‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä½œæˆã—ãªã„

---

## 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

```
AS A ç«¶æ³³é¸æ‰‹
I WANT TO ã‚ˆãä½¿ã†ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜ã—ãŸã„
SO THAT æ¯å›ã®å…¥åŠ›æ™‚é–“ã‚’çŸ­ç¸®ã§ãã‚‹
```

```
AS A ç«¶æ³³é¸æ‰‹
I WANT TO ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç·´ç¿’ãƒ­ã‚°ã‚’ä½œæˆã—ãŸã„
SO THAT ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¿½åŠ ã§ãã‚‹
```

```
AS A ç«¶æ³³é¸æ‰‹
I WANT TO ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆæ™‚ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚‚è¿½åŠ ã—ãŸã„
SO THAT ç›®æ¨™é”æˆã®ãŸã‚ã®ç·´ç¿’ã‚’ã™ãå‘¼ã³å‡ºã›ã‚‹
```

---

## 3. æ©Ÿèƒ½è¦ä»¶

### 3.1 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ | ç·´ç¿’ãƒ­ã‚°ã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆ | P0 |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§è¡¨ç¤º | ä¿å­˜æ¸ˆã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€è¦§ | P0 |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç·´ç¿’ãƒ­ã‚°ä½œæˆ | ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã—ã¦Practice_Logã‚’ä½œæˆ | P0 |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‰Šé™¤ | ä¸è¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å‰Šé™¤ | P1 |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãŠæ°—ã«å…¥ã‚Š | é »ç¹ã«ä½¿ã†ã‚‚ã®ã‚’ãƒ”ãƒ³ç•™ã‚ | P2 |

### 3.2 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ä¿å­˜ã™ã‚‹é …ç›®

| é …ç›® | ä¿å­˜å¯¾è±¡ | å‚™è€ƒ |
|------|----------|------|
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå | â—‹ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šï¼ˆä¾‹ï¼šã€Œæœç·´ã‚­ãƒƒã‚¯ã€ï¼‰ |
| ç¨®ç›®ï¼ˆstyleï¼‰ | â—‹ | Fr, Ba, Br, Fly, IM |
| ã‚«ãƒ†ã‚´ãƒªï¼ˆswim_categoryï¼‰ | â—‹ | Swim, Pull, Kick |
| è·é›¢ï¼ˆdistanceï¼‰ | â—‹ | 25, 50, 100, 200... |
| æœ¬æ•°ï¼ˆrep_countï¼‰ | â—‹ | 1ã€œ99 |
| ã‚»ãƒƒãƒˆæ•°ï¼ˆset_countï¼‰ | â—‹ | 1ã€œ99 |
| ã‚µãƒ¼ã‚¯ãƒ«ï¼ˆcircleï¼‰ | â—‹ | ç§’æ•°ï¼ˆä»»æ„ï¼‰ |
| ãƒ¡ãƒ¢ï¼ˆnoteï¼‰ | â—‹ | ä»»æ„ |
| ã‚¿ã‚°ï¼ˆtag_idsï¼‰ | â—‹ | UUIDé…åˆ—ï¼ˆJSONBï¼‰ |

**ä¿å­˜ã—ãªã„ã‚‚ã®:**
- æ—¥ä»˜ï¼ˆä½œæˆæ™‚ã«æŒ‡å®šï¼‰
- ã‚¿ã‚¤ãƒ ï¼ˆå®Ÿç¸¾ãªã®ã§ä¿å­˜ã—ãªã„ï¼‰
- å ´æ‰€ï¼ˆPracticeå˜ä½ã®æƒ…å ±ï¼‰

### 3.3 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½¿ç”¨ä¸Šé™ï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰

| ãƒ—ãƒ©ãƒ³ | ä¸Šé™æ•° |
|--------|--------|
| ç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼ | 10å€‹ |
| ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ï¼ˆå°†æ¥ï¼‰ | ç„¡åˆ¶é™ |

### 3.4 ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã¨ã®é€£æº

ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆæ™‚ã«ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚‚è¿½åŠ ã™ã‚‹ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã€‚
ãƒã‚§ãƒƒã‚¯ONã®å ´åˆã€ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ `practice_log_templates` ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚

- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã¨ã®ç´ã¥ã‘ï¼ˆFKï¼‰ã¯æŒãŸãªã„
- å˜ç´”ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã ã‘
- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³å‰Šé™¤ã—ã¦ã‚‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯æ®‹ã‚‹

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 4.1 ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

#### practice_log_templates ãƒ†ãƒ¼ãƒ–ãƒ«

```sql
CREATE TABLE practice_log_templates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  name VARCHAR(100) NOT NULL,
  style VARCHAR(10) NOT NULL,
  swim_category VARCHAR(10) NOT NULL DEFAULT 'Swim',
  distance INTEGER NOT NULL DEFAULT 50,
  rep_count INTEGER NOT NULL DEFAULT 1,
  set_count INTEGER NOT NULL DEFAULT 1,
  circle INTEGER,
  note TEXT,
  tag_ids UUID[] DEFAULT '{}',
  is_favorite BOOLEAN DEFAULT false,
  use_count INTEGER DEFAULT 0,
  last_used_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_practice_log_templates_user_id
  ON practice_log_templates(user_id);
CREATE INDEX idx_practice_log_templates_use_count
  ON practice_log_templates(user_id, use_count DESC);

-- RLS
ALTER TABLE practice_log_templates ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own templates"
  ON practice_log_templates
  FOR ALL
  USING (auth.uid() = user_id)
  WITH CHECK (auth.uid() = user_id);
```

### 4.2 TypeScriptå‹å®šç¾©

```typescript
// apps/shared/types/template.ts

export interface PracticeLogTemplate {
  id: string
  user_id: string
  name: string
  style: string
  swim_category: 'Swim' | 'Pull' | 'Kick'
  distance: number
  rep_count: number
  set_count: number
  circle: number | null
  note: string | null
  tag_ids: string[]
  is_favorite: boolean
  use_count: number
  last_used_at: string | null
  created_at: string
  updated_at: string
}

// ä½œæˆç”¨ã®å…¥åŠ›å‹
export interface CreatePracticeLogTemplateInput {
  name: string
  style: string
  swim_category: 'Swim' | 'Pull' | 'Kick'
  distance: number
  rep_count: number
  set_count: number
  circle?: number
  note?: string
  tag_ids?: string[]
}
```

---

## 5. UI/UXè¨­è¨ˆ

### 5.1 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆã®å°ç·š

#### ãƒ‘ã‚¿ãƒ¼ãƒ³A: ç·´ç¿’å±¥æ­´ã‹ã‚‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–

```
ç·´ç¿’å±¥æ­´ â†’ è¨˜éŒ²ã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜ã€
         â†“
    ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåå…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ«
         â†“
       ä¿å­˜å®Œäº†
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³B: ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆæ™‚

```
Goalè©³ç´° â†’ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«
         â†“
    â˜‘ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚‚è¿½åŠ ã™ã‚‹
         â†“
    ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆ + ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³C: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢ã‹ã‚‰æ–°è¦ä½œæˆ

```
è¨­å®š â†’ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç† â†’ ã€Œ+æ–°è¦ä½œæˆã€
     â†“
   ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›
     â†“
   ä¿å­˜å®Œäº†
```

### 5.2 ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ç·´ç¿’ãƒ­ã‚°ä½œæˆã®å°ç·š

**â€» ç·´ç¿’ã®æ–°è¦ä½œæˆã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®ã¿è¡Œã†**

ç·´ç¿’è¨˜éŒ²ã®è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã§ã€æœ€åˆã‹ã‚‰2ã¤ã®ãƒœã‚¿ãƒ³ã‚’ä¸¦ã¹ã¦è¡¨ç¤ºã™ã‚‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ ç·´ç¿’è¨˜éŒ²                    âœï¸  ğŸ—‘ï¸   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                 â”‚    â”‚
â”‚  â”‚  [ğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰] [âœï¸ æ–°è¦] â”‚    â”‚  â† æœ€åˆã‹ã‚‰2ã¤è¡¨ç¤º
â”‚  â”‚                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤‰æ›´å‰ï¼ˆã‚¯ãƒªãƒƒã‚¯æ•°: 2ï¼‰**
```
ã€Œ+ ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¿½åŠ ã€ã‚¯ãƒªãƒƒã‚¯ â†’ é¸æŠè‚¢è¡¨ç¤º â†’ é¸æŠ
```

**å¤‰æ›´å¾Œï¼ˆã‚¯ãƒªãƒƒã‚¯æ•°: 1ï¼‰**
```
ã€ŒğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã€orã€Œâœï¸ æ–°è¦ã€ã‚’ç›´æ¥ã‚¯ãƒªãƒƒã‚¯
```

#### æ—¢å­˜UIã®å¤‰æ›´ç‚¹

**PracticeLogForm ã®ã€ŒğŸ“Œ ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‹ã‚‰ä½œæˆã€ãƒœã‚¿ãƒ³ â†’ å»ƒæ­¢**

- å¤‰æ›´å¾Œ: DayDetailModal ã®ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ä½œæˆã€ã«çµ±åˆ

### 5.3 ç”»é¢ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—

#### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ          âœ•    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜… ã‚ˆãä½¿ã†ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æœç·´ã‚­ãƒƒã‚¯                   > â”‚ â”‚
â”‚  â”‚ 100m Ã— 10æœ¬ Ã— 3ã‚»ãƒƒãƒˆ Fr Kick â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ãƒ¡ã‚¤ãƒ³Swim                   > â”‚ â”‚
â”‚  â”‚ 50m Ã— 20æœ¬ Ã— 2ã‚»ãƒƒãƒˆ Fr Swim  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  ã™ã¹ã¦ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ãƒã‚¿ãƒ•ãƒ©ã‚¤ãƒ‰ãƒªãƒ«              > â”‚ â”‚
â”‚  â”‚ 25m Ã— 8æœ¬ Ã— 4ã‚»ãƒƒãƒˆ Fly Swim  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ã‚´ãƒ¼ãƒ«ã‚»ãƒƒãƒˆ                 > â”‚ â”‚
â”‚  â”‚ 50m Ã— 6æœ¬ Ã— 3ã‚»ãƒƒãƒˆ Fr Swim   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç®¡ç† ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ç”»é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¿å­˜æ¸ˆã¿: 5/10                    â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜… æœç·´ã‚­ãƒƒã‚¯            â‹®   â”‚ â”‚
â”‚  â”‚    100m Ã— 10æœ¬ Ã— 3ã‚»ãƒƒãƒˆ      â”‚ â”‚
â”‚  â”‚    Fr Kick  ã‚µãƒ¼ã‚¯ãƒ« 1'30"    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â˜† ãƒ¡ã‚¤ãƒ³Swim            â‹®   â”‚ â”‚
â”‚  â”‚    50m Ã— 20æœ¬ Ã— 2ã‚»ãƒƒãƒˆ       â”‚ â”‚
â”‚  â”‚    Fr Swim  ã‚µãƒ¼ã‚¯ãƒ« 0'50"    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ + æ–°ã—ã„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆ ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€Œâ‹®ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼:
  - ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ /è§£é™¤
  - å‰Šé™¤
```

#### ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆå¤‰æ›´ç®‡æ‰€ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ã‚¿ã‚¤ãƒˆãƒ«: [50mÃ—6æœ¬ ã‚´ãƒ¼ãƒ«ã‚»ãƒƒãƒˆ   ] â”‚
â”‚  ç¨®ç›®: [Fr â–¼]  ã‚«ãƒ†ã‚´ãƒª: [Swim â–¼]   â”‚
â”‚  è·é›¢: [50]m Ã— [6]æœ¬ Ã— [3]ã‚»ãƒƒãƒˆ    â”‚
â”‚  ã‚µãƒ¼ã‚¯ãƒ«: [1]åˆ†[30]ç§’              â”‚
â”‚  ç›®æ¨™å¹³å‡: [35.0]ç§’                 â”‚
â”‚  æœŸé™: [2026/02/28]                 â”‚
â”‚                                      â”‚
â”‚  â˜‘ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚‚è¿½åŠ ã™ã‚‹         â”‚  â† NEW
â”‚    ï¼ˆç·´ç¿’ä½œæˆæ™‚ã«ã™ãä½¿ãˆã¾ã™ï¼‰      â”‚
â”‚                                      â”‚
â”‚  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]        [ä½œæˆ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. APIè¨­è¨ˆ

### 6.1 API ã‚¯ãƒ©ã‚¹

```typescript
// apps/shared/api/templates.ts

import type { SupabaseClient } from '@supabase/supabase-js'
import type {
  PracticeLogTemplate,
  CreatePracticeLogTemplateInput
} from '../types/template'

export class TemplateAPI {
  constructor(private supabase: SupabaseClient) {}

  /**
   * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ã‚’å–å¾—
   */
  async getTemplates(): Promise<PracticeLogTemplate[]> {
    const { data, error } = await this.supabase
      .from('practice_log_templates')
      .select('*')
      .order('is_favorite', { ascending: false })
      .order('use_count', { ascending: false })

    if (error) throw error
    return data
  }

  /**
   * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆ
   */
  async createTemplate(
    input: CreatePracticeLogTemplateInput
  ): Promise<PracticeLogTemplate> {
    const { data, error } = await this.supabase
      .from('practice_log_templates')
      .insert({
        name: input.name,
        style: input.style,
        swim_category: input.swim_category,
        distance: input.distance,
        rep_count: input.rep_count,
        set_count: input.set_count,
        circle: input.circle || null,
        note: input.note || null,
        tag_ids: input.tag_ids || [],
      })
      .select()
      .single()

    if (error) throw error
    return data
  }

  /**
   * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ï¼ˆuse_countæ›´æ–°ï¼‰
   */
  async useTemplate(templateId: string): Promise<void> {
    const { error } = await this.supabase
      .from('practice_log_templates')
      .update({
        use_count: this.supabase.rpc('increment', { row_id: templateId }),
        last_used_at: new Date().toISOString(),
      })
      .eq('id', templateId)

    if (error) throw error
  }

  /**
   * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å‰Šé™¤
   */
  async deleteTemplate(templateId: string): Promise<void> {
    const { error } = await this.supabase
      .from('practice_log_templates')
      .delete()
      .eq('id', templateId)

    if (error) throw error
  }

  /**
   * ãŠæ°—ã«å…¥ã‚Šã‚’åˆ‡ã‚Šæ›¿ãˆ
   */
  async toggleFavorite(templateId: string): Promise<void> {
    const { data: current } = await this.supabase
      .from('practice_log_templates')
      .select('is_favorite')
      .eq('id', templateId)
      .single()

    const { error } = await this.supabase
      .from('practice_log_templates')
      .update({ is_favorite: !current?.is_favorite })
      .eq('id', templateId)

    if (error) throw error
  }
}
```

### 6.2 use_count ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆç”¨RPC

```sql
CREATE OR REPLACE FUNCTION increment_template_use_count(template_id UUID)
RETURNS void AS $$
BEGIN
  UPDATE practice_log_templates
  SET use_count = use_count + 1,
      last_used_at = now(),
      updated_at = now()
  WHERE id = template_id AND user_id = auth.uid();
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

---

## 7. å®Ÿè£…è¨ˆç”»

### 7.1 ãƒ•ã‚§ãƒ¼ã‚ºåˆ†ã‘

#### Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆ1é€±ç›®ï¼‰
- [ ] DBãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
- [ ] å‹å®šç¾©è¿½åŠ 
- [ ] TemplateAPI ã‚¯ãƒ©ã‚¹å®Ÿè£…
- [ ] React Query hooks å®Ÿè£…

#### Phase 2: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†UIï¼ˆ2é€±ç›®ï¼‰
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ãƒšãƒ¼ã‚¸ä½œæˆï¼ˆ/settings/templatesï¼‰
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‰Šé™¤æ©Ÿèƒ½
- [ ] ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½

#### Phase 3: ç·´ç¿’ä½œæˆé€£æºï¼ˆ3é€±ç›®ï¼‰
- [ ] ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠãƒ¢ãƒ¼ãƒ€ãƒ«ä½œæˆ
- [ ] DayDetailModal ã¸ã®å°ç·šè¿½åŠ 
- [ ] ç·´ç¿’å±¥æ­´ã‹ã‚‰ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜ã€æ©Ÿèƒ½
- [ ] use_count ã®è‡ªå‹•æ›´æ–°
- [ ] æ—¢å­˜ã®ã€Œãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ã‹ã‚‰ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’å»ƒæ­¢

#### Phase 4: ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é€£æºï¼ˆ3é€±ç›®å¾ŒåŠï¼‰
- [ ] MilestoneCreateModal ã«ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚‚è¿½åŠ ã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹è¿½åŠ 
- [ ] ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆæ™‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè‡ªå‹•ä½œæˆå‡¦ç†

### 7.2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
apps/
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ practiceLogTemplates.ts              # NEW: API ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ practiceLogTemplate.ts               # NEW: å‹å®šç¾©
â”‚   â””â”€â”€ hooks/
â”‚       â””â”€â”€ queries/
â”‚           â””â”€â”€ practiceLogTemplates.ts          # NEW: React Query hooks
â”‚
â””â”€â”€ web/
    â”œâ”€â”€ app/
    â”‚   â””â”€â”€ (authenticated)/
    â”‚       â””â”€â”€ settings/
    â”‚           â””â”€â”€ practice-log-templates/      # NEW: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç®¡ç†ãƒšãƒ¼ã‚¸
    â”‚               â”œâ”€â”€ page.tsx
    â”‚               â””â”€â”€ _components/
    â”‚                   â”œâ”€â”€ PracticeLogTemplateList.tsx
    â”‚                   â””â”€â”€ PracticeLogTemplateCard.tsx
    â”‚
    â””â”€â”€ components/
        â””â”€â”€ practice-log-templates/              # NEW
            â”œâ”€â”€ PracticeLogTemplateSelectModal.tsx
            â””â”€â”€ SaveAsPracticeLogTemplateModal.tsx
```

---

## 8. æˆåŠŸæŒ‡æ¨™ï¼ˆKPIï¼‰

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆç‡ | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®30%ä»¥ä¸Š | ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆæ•° |
| ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨ç‡ | ä½œæˆè€…ã®50%ãŒé€±1å›ä»¥ä¸Šä½¿ç”¨ | use_count ã®å¢—åŠ  |
| ç·´ç¿’å…¥åŠ›æ™‚é–“å‰Šæ¸› | å¹³å‡50%å‰Šæ¸› | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ |

---

## 9. å°†æ¥ã®æ‹¡å¼µ

- ãƒãƒ¼ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆãƒãƒ¼ãƒ ç®¡ç†è€…ãŒä½œæˆã€ãƒ¡ãƒ³ãƒãƒ¼ãŒä½¿ç”¨ï¼‰
- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- AIæ¨å¥¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆé »å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰è‡ªå‹•ææ¡ˆï¼‰

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ | æ‹…å½“ |
|------|------------|----------|------|
| 2026-01-28 | 1.0 | åˆç‰ˆä½œæˆ | - |
| 2026-01-28 | 1.1 | ç·´ç¿’å±¥æ­´ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®è¿½åŠ å°ç·šã‚’å‰Šé™¤ | - |
| 2026-01-28 | 1.2 | ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³é€£æºã‚’è¿½åŠ  | - |
| 2026-01-28 | 2.0 | ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã‚’ç°¡ç•¥åŒ–ï¼ˆpractice_log_templates 1ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ï¼‰ | - |
| 2026-01-28 | 2.1 | ãƒ¡ãƒ¢ï¼ˆnoteï¼‰ã¨ã‚¿ã‚°ï¼ˆtag_idsï¼‰ã‚’ä¿å­˜å¯¾è±¡ã«è¿½åŠ  | - |
| 2026-01-28 | 2.2 | UIæ”¹å–„: ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ã€ã€Œæ–°è¦ã€ãƒœã‚¿ãƒ³ã‚’æœ€åˆã‹ã‚‰è¡¨ç¤ºï¼ˆ1ã‚¯ãƒªãƒƒã‚¯å‰Šæ¸›ï¼‰ | - |
