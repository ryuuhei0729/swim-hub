# 個人大会記録のテストケース

## テストケース一覧

### TC-COMPETITION-001: 大会記録の追加（スプリットタイムあり・リレー種目）

**優先度**: 高  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、大会記録追加画面、エントリー登録フォーム、記録入力フォーム

#### 前提条件
- ログイン済みの状態である
- ダッシュボード画面が表示されている

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーで今日の日付をクリック | 日付選択モーダルが表示される |
| 2 | 「大会記録を追加」を選択 | 大会記録追加画面（CompetitionBasicForm）が表示される |
| 3 | 大会名を入力（例: 「○○水泳大会」） | 大会名フィールドに値が入力される |
| 4 | 日付が自動入力されていることを確認 | 選択した日付（今日の日付）が表示されている |
| 5 | 場所を入力（例: 「△△プール」） | 場所フィールドに値が入力される |
| 6 | プール種別を選択（例: 「長水路」を選択、値: 1） | プール種別が選択される |
| 7 | メモを入力（任意、例: 「全国大会予選」） | メモフィールドに値が入力される |
| 8 | 「次へ（記録登録）」ボタンをクリック | エントリー登録フォーム（EntryLogForm）が表示される |
| 9 | 1つ目のエントリーの種目を選択（例: 「200m自由形」） | 種目が選択される |
| 10 | 1つ目のエントリーのエントリータイムを入力（例: 2:05.00） | エントリータイムフィールドに値が入力される |
| 11 | 1つ目のエントリーのメモを入力（任意、例: 「予選通過」） | メモフィールドに値が入力される |
| 12 | 「種目を追加」ボタンをクリック | 2つ目のエントリー入力フォームが表示される |
| 13 | 2つ目のエントリーの種目を選択（例: 「100mバタフライ」） | 種目が選択される |
| 14 | 2つ目のエントリーのエントリータイムを入力（例: 1:00.50） | エントリータイムフィールドに値が入力される |
| 15 | 2つ目のエントリーのメモを入力（任意、例: 「決勝進出」） | メモフィールドに値が入力される |
| 16 | 「エントリー登録」ボタンをクリック | エントリーが登録され、記録入力フォーム（RecordLogForm）が表示される |
| 17 | タイムを入力（例: 2:00.00） | タイムフィールドに値が入力される |
| 18 | 「リレー種目」チェックボックスをチェック | リレー種目フラグが有効になる |
| 19 | メモを入力（任意、例: 「第1泳者」） | メモフィールドに値が入力される |
| 20 | 動画URLを入力（任意、例: https://www.youtube.com/watch?v=xxx） | 動画URLフィールドに値が入力される |
| 21 | 「スプリットを追加」ボタンをクリック | スプリットタイム入力フォームが表示される |
| 22 | 1つ目のスプリット距離を入力（例: 50） | スプリット距離フィールドに値が入力される |
| 23 | 1つ目のスプリットタイムを入力（例: 28.00） | スプリットタイムフィールドに値が入力される |
| 24 | さらに「スプリットを追加」ボタンをクリック | 2つ目のスプリットタイム入力フォームが表示される |
| 25 | 2つ目のスプリット距離を入力（例: 100） | スプリット距離フィールドに値が入力される |
| 26 | 2つ目のスプリットタイムを入力（例: 1:00.00） | スプリットタイムフィールドに値が入力される |
| 27 | さらに「スプリットを追加」ボタンをクリック | 3つ目のスプリットタイム入力フォームが表示される |
| 28 | 3つ目のスプリット距離を入力（例: 150） | スプリット距離フィールドに値が入力される |
| 29 | 3つ目のスプリットタイムを入力（例: 1:32.00） | スプリットタイムフィールドに値が入力される |
| 30 | 「保存」ボタンをクリック | エントリー情報・スプリットタイム付き・リレー種目の大会記録が保存される |
| 31 | フォームが閉じる | ダッシュボードに戻る |
| 32 | カレンダーに大会記録のマーカーが表示されることを確認 | 大会記録のマーカー（record-mark、entry-mark、competition-markのいずれか）が表示される |
| 33 | ダッシュボードのカレンダーで今日の日付をクリック | 先ほどの登録内容が登録されている（大会名「○○水泳大会」が表示されている） |

---

### TC-COMPETITION-002: 大会記録の編集（基本情報）

**優先度**: 高  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、大会記録編集フォーム

#### 前提条件
- ログイン済みの状態である
- 既存の大会記録（competition）が存在する（TC-COMPETITION-001で作成されたもの）

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーで今日の日付をクリック | 大会記録が表示される |
| 2 | 大会記録（上の方）の「編集」ボタン（鉛筆アイコン）をクリック | 大会記録編集フォーム（CompetitionBasicForm）が表示される |
| 3 | 既存の値が表示されていることを確認 | 大会名、日付、場所、プール種別、メモが表示されている（値が存在することを確認） |
| 4 | 大会名を変更（例: 「○○水泳大会」→「△△水泳大会」） | 大会名フィールドの値が変更される |
| 5 | 場所を変更（例: 「△△プール」→「□□プール」） | 場所フィールドの値が変更される |
| 6 | プール種別を変更（例: 「長水路」→「短水路」、値: 0） | プール種別が変更される |
| 7 | メモを変更（例: 「全国大会予選」→「全国大会本選」） | メモフィールドの値が変更される |
| 8 | 「更新」ボタンをクリック | 変更が保存される |
| 9 | フォームが閉じ、日別詳細モーダルが自動で開く | 日別詳細モーダルが表示される |
| 10 | 変更された内容が反映されていることを確認 | 日別詳細モーダルで変更が確認できる（大会名「△△水泳大会」、場所「□□プール」が表示されている） |

---

### TC-COMPETITION-003: 大会記録の編集（記録情報・スプリットタイム・リレー種目）

**優先度**: 高  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、記録編集フォーム

#### 前提条件
- ログイン済みの状態である
- 既存の大会記録（record）が存在する（TC-COMPETITION-001で作成されたもの）

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーで今日の日付をクリック | 大会記録が表示される |
| 2 | 記録（下の方）の「編集」ボタン（鉛筆アイコン）をクリック | 記録編集フォーム（RecordLogForm）が表示される |
| 3 | 既存の値が表示されていることを確認 | 種目、タイム（2:00を含む）、リレー種目のチェック状態（チェック済み）、メモ、動画URL、スプリットタイムが表示されている |
| 4 | 種目を変更（例: バタフライや200mを含む種目を選択） | 種目が変更される |
| 5 | タイムを変更（例: 2:00.00 → 1:58.50） | タイムフィールドの値が変更される |
| 6 | リレー種目のチェックボックスの状態を変更（チェック済みの場合は外す） | リレー種目フラグの状態が変更される（チェックが外れる） |
| 7 | メモを変更（例: 「第1泳者」→「第2泳者」） | メモフィールドの値が変更される |
| 8 | 動画URLを変更（例: https://www.youtube.com/watch?v=yyy） | 動画URLフィールドの値が変更される |
| 9 | 既存のスプリットタイムを編集（1つ目のスプリットタイムを変更、例: 28.00 → 27.50） | スプリットタイムが変更される |
| 10 | スプリットタイムを追加（「スプリットを追加」ボタンをクリックして新しいスプリットタイムを追加） | 新しいスプリットタイム入力フォームが表示される |
| 11 | 追加したスプリットタイムの距離とタイムを入力（例: 距離200、タイム1:58.50） | スプリットタイムが追加される |
| 12 | 既存のスプリットタイムを削除（2つ目のスプリットタイムのゴミ箱アイコンをクリック） | スプリットタイムが削除される |
| 13 | 「保存」ボタンをクリック | 変更が保存される |
| 14 | フォームが閉じる | フォームが閉じる（日別詳細モーダルが自動で開く場合もある） |
| 15 | 変更された内容が反映されていることを確認 | 日別詳細モーダルで変更が確認できる（タイム「1:58.50」が表示されている） |

---

### TC-COMPETITION-004: 大会記録の削除（レコードのみ）

**優先度**: 中  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、日別詳細モーダル

#### 前提条件
- ログイン済みの状態である
- 既存の大会記録が存在する（competition、entry、recordが存在する）
- TC-COMPETITION-003で記録を編集した状態

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーで大会記録がある日付をクリック | 日別詳細モーダルが表示される |
| 2 | 記録（record）の削除アイコンをクリック | 削除確認ダイアログが表示される（表示されない場合は直接削除される） |
| 3 | 削除確認ダイアログが表示された場合、「キャンセル」をクリック | ダイアログが閉じ、削除されない |
| 4 | 再度記録の削除アイコンをクリック | 削除確認ダイアログが表示される |
| 5 | 「削除」をクリック | 記録が削除される |
| 6 | 「エントリー済み（記録未登録）」セクションが表示されていることを確認 | エントリー情報が表示され、記録が未登録の状態になっている |

---

### TC-COMPETITION-005: エントリーの編集

**優先度**: 高  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、エントリー編集フォーム

#### 前提条件
- ログイン済みの状態である
- 既存のエントリーが存在する（エントリー済み記録未登録の状態）
- TC-COMPETITION-004でレコードを削除した状態

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーでエントリーがある日付をクリック | 日別詳細モーダルが表示される |
| 2 | 「エントリー済み（記録未登録）」セクションの「編集」ボタン（鉛筆アイコン）をクリック | エントリー編集フォーム（EntryLogForm）が表示される |
| 3 | 既存の値が表示されていることを確認 | 種目、エントリータイム（値が存在することを確認）、メモが表示されている |
| 4 | 1つ目のエントリーの種目を変更（例: バタフライや200mを含む種目を選択） | 種目が変更される |
| 5 | 1つ目のエントリーのエントリータイムを変更（例: 2:05.00 → 2:03.50） | エントリータイムフィールドの値が変更される |
| 6 | 1つ目のエントリーのメモを変更（例: 「予選通過」→「予選1位通過」） | メモフィールドの値が変更される |
| 7 | 複数のエントリーがある場合、2つ目のエントリーの種目を変更（例: バタフライを含む種目を選択） | 種目が変更される |
| 8 | 複数のエントリーがある場合、2つ目のエントリーのエントリータイムを変更（例: 1:00.50 → 1:00.00） | エントリータイムフィールドの値が変更される |
| 9 | 複数のエントリーがある場合、2つ目のエントリーのメモを変更（例: 「決勝進出」→「決勝1位」） | メモフィールドの値が変更される |
| 10 | 「エントリー登録」ボタンをクリック | 変更が保存される |
| 11 | フォームが閉じ、日別詳細モーダルが自動で開く | 日別詳細モーダルが表示される |
| 12 | 変更された内容が反映されていることを確認 | 日別詳細モーダルで変更が確認できる（エントリーサマリーにエントリータイム「2:03」または「エントリータイム」ラベルが表示されている） |

---

### TC-COMPETITION-006: エントリーの削除

**優先度**: 中  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、日別詳細モーダル

#### 前提条件
- ログイン済みの状態である
- 既存のエントリーが存在する（エントリー済み記録未登録の状態、2つ以上のエントリーが存在する）
- TC-COMPETITION-005でエントリーを編集した状態

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーでエントリーがある日付をクリック | 日別詳細モーダルが表示される |
| 2 | 「エントリー済み（記録未登録）」セクション内の1つ目のエントリーの削除アイコンをクリック | 削除確認ダイアログが表示される |
| 3 | 「削除」をクリック | 1つ目のエントリーが削除される |
| 4 | 日別詳細モーダルから該当エントリーが消えていることを確認 | 削除されたエントリー（1つ目のエントリー）が表示されない |
| 5 | 2つ目のエントリーの削除アイコンをクリック | 削除確認ダイアログが表示される |
| 6 | 「削除」をクリック | 2つ目のエントリーが削除される |
| 7 | 2つ目のエントリーが削除されたことを確認 | 削除されたエントリー（2つ目のエントリー）が表示されない |
| 8 | すべてのエントリーが削除された場合、「エントリー済み（記録未登録）」セクションが表示されないことを確認 | エントリー情報が表示されない |
| 9 | 大会情報（competition）のみが表示されていることを確認 | 大会情報が表示されている（大会名「△△水泳大会」または「○○水泳大会」が表示されている） |

---

### TC-COMPETITION-007: 大会の削除

**優先度**: 中  
**テスト種別**: 機能テスト  
**対象画面**: ダッシュボード、日別詳細モーダル

#### 前提条件
- ログイン済みの状態である
- 既存の大会記録（competition）が存在する
- TC-COMPETITION-006でエントリーを削除した状態（またはエントリーが存在しない状態）

#### テスト手順

| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ダッシュボードのカレンダーで大会記録がある日付をクリック | 日別詳細モーダルが表示される |
| 2 | 大会情報（competition）の削除アイコンをクリック | 削除確認ダイアログが表示される |
| 3 | 「削除」をクリック | 大会情報が削除される |
| 4 | 日別詳細モーダルが閉じていることを確認 | モーダルが閉じる |
| 5 | カレンダーのマーカーが更新されていることを確認 | 大会記録のマーカー（competition-mark）が存在しないことを確認 |
| 6 | 該当日付をクリックしても大会記録が表示されないことを確認 | 大会記録が表示されない（空の日別詳細モーダルが表示される場合、「本日は記録がありません」などのメッセージが表示される） |

---
