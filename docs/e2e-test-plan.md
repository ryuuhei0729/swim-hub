# E2Eテスト追加計画

## 現状

| テストファイル | テスト数 | カバー機能 |
|--------------|---------|-----------|
| `practice.spec.ts` | 6 | 練習記録の追加・編集・削除 |
| `competition.spec.ts` | 7 | 大会記録・エントリーの追加・編集・削除 |
| **合計** | **13** | |

---

## 追加すべきE2Eテスト

### 🔴 高優先度（コア機能）

#### 1. 認証フロー (`auth.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-AUTH-001 | ログイン成功 | 正しい認証情報でログイン→ダッシュボードへ遷移 |
| TC-AUTH-002 | ログイン失敗 | 間違ったパスワードでエラーメッセージ表示 |
| TC-AUTH-003 | ログアウト | ログアウト→ログイン画面へリダイレクト |
| TC-AUTH-004 | 未認証アクセス制御 | 未認証ユーザーが保護ページにアクセス→ログイン画面へリダイレクト |
| TC-AUTH-005 | サインアップ | 新規ユーザー登録フロー |
| TC-AUTH-006 | パスワードリセット | パスワードリセットメール送信フロー |

#### 2. 目標管理 (`goals.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-GOALS-001 | 目標の新規作成 | 種目・目標タイム・期限を設定して作成 |
| TC-GOALS-002 | 目標の編集 | 既存目標の内容を変更 |
| TC-GOALS-003 | 目標の削除 | 目標を削除して一覧から消える |
| TC-GOALS-004 | 目標達成マーク | 目標を達成済みにマーク |
| TC-GOALS-005 | 目標一覧表示 | 目標一覧が正しく表示される |

#### 3. チーム機能 (`teams.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-TEAMS-001 | チーム作成 | 新規チームを作成 |
| TC-TEAMS-002 | チーム参加 | 招待コードでチームに参加 |
| TC-TEAMS-003 | チーム情報編集 | チーム名・説明の編集（管理者のみ） |
| TC-TEAMS-004 | チーム脱退 | チームから脱退 |
| TC-TEAMS-005 | チーム削除 | チームを削除（管理者のみ） |

#### 4. マイページ (`mypage.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-MYPAGE-001 | プロフィール表示 | プロフィール情報が正しく表示 |
| TC-MYPAGE-002 | プロフィール編集 | 名前・自己紹介の編集 |
| TC-MYPAGE-003 | アバター変更 | プロフィール画像のアップロード |
| TC-MYPAGE-004 | ベストタイム表示 | ベストタイム一覧が正しく表示 |

---

### 🟡 中優先度（よく使う機能）

#### 5. 出席管理 (`attendance.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-ATTEND-001 | 出席登録 | メンバーの出席を登録 |
| TC-ATTEND-002 | 出席編集 | 登録済み出席の変更 |
| TC-ATTEND-003 | 出席一覧表示 | 日付別出席一覧の表示 |
| TC-ATTEND-004 | 出席フィルタリング | 日付・メンバーでフィルタ |

#### 6. スケジュール (`schedule.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-SCHED-001 | スケジュール作成 | 新規スケジュール作成 |
| TC-SCHED-002 | スケジュール編集 | 既存スケジュールの変更 |
| TC-SCHED-003 | スケジュール削除 | スケジュールの削除 |
| TC-SCHED-004 | カレンダー表示 | カレンダーにスケジュール表示 |

#### 7. メンバー管理 (`members.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-MEMBER-001 | メンバー一覧表示 | チームメンバー一覧の表示 |
| TC-MEMBER-002 | メンバー詳細表示 | メンバーの詳細情報表示 |
| TC-MEMBER-003 | 役割変更 | メンバーの役割変更（管理者のみ） |
| TC-MEMBER-004 | メンバー削除 | メンバーをチームから削除（管理者のみ） |

#### 8. 設定 (`settings.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-SETTINGS-001 | 設定画面表示 | 設定画面が正しく表示 |
| TC-SETTINGS-002 | 練習テンプレート作成 | 新規テンプレート作成 |
| TC-SETTINGS-003 | 練習テンプレート編集 | 既存テンプレートの編集 |
| TC-SETTINGS-004 | 練習テンプレート削除 | テンプレートの削除 |

---

### 🟢 低優先度（補助機能）

#### 9. ベストタイム一括編集 (`bulk-besttime.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-BULK-001 | 一括編集画面表示 | 一括編集画面が正しく表示 |
| TC-BULK-002 | ベストタイム一括更新 | 複数のベストタイムを一括更新 |

#### 10. ダッシュボード (`dashboard.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-DASH-001 | ダッシュボード表示 | カレンダーと記録が正しく表示 |
| TC-DASH-002 | 月切り替え | 前月・次月への切り替え |
| TC-DASH-003 | 日付選択 | 日付クリックで詳細表示 |

#### 11. エラー処理 (`error-handling.spec.ts`)

| ID | テストケース | 説明 |
|----|------------|------|
| TC-ERROR-001 | 404ページ | 存在しないURLで404ページ表示 |
| TC-ERROR-002 | バリデーションエラー | 不正な入力でエラーメッセージ表示 |

---

## 実装優先順位

1. **認証フロー** - 全機能の基盤
2. **目標管理** - 独立した機能でテストしやすい
3. **チーム機能** - 複数ユーザー連携の中核
4. **マイページ** - ユーザー情報管理
5. **出席管理** - チーム機能と連携
6. **スケジュール** - チーム機能と連携
7. **メンバー管理** - チーム機能と連携
8. **設定** - 補助機能
9. **その他** - 補助機能

---

## テスト実行コマンド

```bash
# 全E2Eテスト実行
npm run test:e2e

# 特定ファイルのみ実行
npx playwright test e2e/src/tests/auth.spec.ts

# UIモードで実行
npm run test:e2e:ui

# デバッグモード
npm run test:e2e:debug
```

---

## 参考：既存テストの構造

```
apps/web/e2e/
├── scripts/
│   ├── create-test-user.js
│   └── reset-test-data.js
├── src/
│   ├── config/
│   │   ├── config.ts
│   │   ├── global-setup.ts
│   │   ├── global-teardown.ts
│   │   └── playwright.config.ts
│   └── tests/
│       └── personal/
│           ├── competition.spec.ts
│           └── practice.spec.ts
```
