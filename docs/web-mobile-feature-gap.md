# ウェブ vs モバイル 機能差異まとめ

このドキュメントは、swim-hubのウェブアプリとモバイルアプリの機能差異をまとめたものです。

---

## 1. ダッシュボードからの練習記録・大会記録登録

### 1.1 練習記録登録

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| 基本情報入力（日付、タイトル、場所、メモ） | ✅ | ✅ | 同等 |
| 画像添付 | ✅ | ✅ | 同等 |
| テンプレート保存 | ✅ | ❌ | 練習メニューをテンプレートとして保存 |
| テンプレート選択 | ✅ | ❌ | `PracticeLogTemplateSelectModal` |
| 場所サジェスト | ✅ | ❌ | `PlaceCombobox` で過去入力を候補表示 |
| 練習ログ（メニュー）入力 | ✅ | ✅ | 同等 |
| 複数メニュー登録 | ✅ | ✅ | 同等 |
| 練習ログタグ機能 | ✅ | ✅ | タグの作成・編集・削除・選択・表示 |

### 1.2 大会記録登録

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| 基本情報入力（日付、タイトル、場所、プール種別、メモ） | ✅ | ✅ | 同等 |
| 画像添付 | ✅ | ✅ | 同等 |
| エントリー登録 | ✅ | ✅ | 同等 |
| ベストタイム表示（エントリー時） | ✅ | ❌ | 該当種目のベストを参考表示 |
| エントリーSKIP | ✅ | ❌ | エントリーをスキップして記録入力へ |
| 記録入力（スプリットタイム、反応時間等） | ✅ | ✅ | 同等 |
| 場所サジェスト | ✅ | ❌ | `PlaceCombobox` |

### 1.3 共通UX

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| 未保存確認ダイアログ | ✅ | ❌ | フォームを閉じる際に警告 |

---

## 2. タイム入力のUX

### 2.1 入力形式

| 形式 | ウェブ | モバイル | 例 |
|------|:------:|:--------:|-----|
| クイック入力（省略形式） | ✅ | ✅ | `31-2` → `0:31.20` |
| 分-秒-ミリ秒形式 | ✅ | ✅ | `1-30-50` → `1:30.50` |
| 標準形式 | ✅ | ✅ | `1:30.50` |
| 秒のみ | ✅ | ✅ | `30.50` |
| 秒+s形式 | ✅ | ✅ | `30.50s` |

### 2.2 入力補助機能

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| コンテキスト記憶 | ✅ | ✅ | 前回入力を基に推測（分の位、秒の十の位） |
| Enterキーで次へ移動 | ✅ | - | モバイルはキーボードのUIが異なる |
| フォーカスアウト時にパース | ✅ | ✅ | 入力確定時にパース |
| ブラウザバック防止 | ✅ | - | モバイルはナビゲーション方式が異なる |

### 2.3 統計表示

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| セット別平均タイム | ✅ | ✅ | 同等 |
| 全体平均タイム | ✅ | ✅ | 同等 |
| 最速タイム | ❌ | ✅ | モバイルのみ |

---

## 3. その他の機能差異（アプリ全体）

### 3.1 ウェブのみにある機能

| 機能 | 説明 | 実装場所 |
|------|------|----------|
| 目標管理 | 目標の作成・編集・マイルストーン管理・振り返り | `/goals` |
| チーム管理者機能 | 複数チームの管理、練習スケジュール、メンバーの練習ログ一括確認 | `/teams-admin` |
| メンバー管理 | チーム全体のメンバー一覧表示・管理 | `/members` |
| ベストタイム一括入力 | Excelファイルでベストタイムを一括登録 | `/bulk-besttime` |
| Google Calendar連携 | 練習・大会予定をGoogleカレンダーに同期 | `/api/google-calendar` |
| 練習ログテンプレート管理 | カスタムテンプレートの作成・編集 | `/settings/practice-log-templates` |
| ダッシュボードからの出欠確認 | カレンダーの日付詳細モーダルでチームの出欠状況を確認・登録 | `DayDetailModal/AttendanceSection` |
| シェアカード機能 | 練習・大会記録をSNS用の画像としてダウンロード・共有 | `components/share/ShareCardModal` |
| 練習ログ一括入力（管理者） | チームメンバーの練習ログをまとめて入力 | `/teams-admin/[teamId]/practices/[practiceId]/logs` |
| 大会記録代理入力（管理者） | チームメンバーの大会記録を管理者が代理入力 | `/teams/[teamId]/competitions/[competitionId]/records` |
| 出欠状態の一括変更（管理者） | 複数イベントの出欠受付状態をまとめて変更 | `AdminMonthlyAttendance` |
| 4段階の役割管理 | admin/coach/staff/member の4種類（モバイルは admin/user の2種類） | `RoleChangeModal` |

### 3.2 モバイルのみにある機能

| 機能 | 説明 |
|------|------|
| 大会記録のソート切り替え | 日付/タイムでソート方向（昇順/降順）を切り替え可能（Webは日付降順固定） |

※ 以下は両方に実装済み（同等）:
- 練習記録のタグフィルター
- 大会記録のフィルター（種目・年度・プールタイプ）

---

## 3.3 出欠管理機能の比較

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| 月次出欠管理（メンバー向け） | ✅ | ✅ | チーム詳細画面から利用可能 |
| 月次出欠管理（管理者向け） | ✅ | ❌ | イベントの出欠受付状態を一括変更 |
| ダッシュボードからの出欠確認 | ✅ | ❌ | カレンダーの日付詳細から出欠状況表示 |
| ダッシュボードからの出欠登録 | ✅ | ❌ | 日付詳細モーダル内から直接登録可能 |

---

## 3.4 チーム管理機能の比較

| 機能 | ウェブ | モバイル | 備考 |
|------|:------:|:--------:|------|
| チーム作成・参加 | ✅ | ✅ | 同等 |
| メンバー一覧表示 | ✅ | ✅ | 同等 |
| メンバー削除 | ✅ | ✅ | 同等（管理者のみ） |
| 役割変更 | ✅ | ✅ | Webは4段階(admin/coach/staff/member)、モバイルは2段階(admin/user) |
| 練習スケジュール管理 | ✅ | ❌ | `/teams-admin`から練習を作成・編集 |
| 大会管理 | ✅ | ❌ | `/teams-admin`から大会を作成・編集 |
| 練習ログ一括入力 | ✅ | ❌ | 管理者がメンバーのログを代理入力 |
| 大会記録代理入力 | ✅ | ❌ | 管理者がメンバーの記録を代理入力 |
| お知らせ投稿 | ✅ | ✅ | 同等 |
| 招待コード表示・コピー | ✅ | ✅ | 同等 |

**※ モバイル版の方針**: チーム管理機能（練習・大会タブ）はモバイルに実装せず、Web版への誘導を表示。
チーム詳細画面の「練習」「大会」タブには「チーム管理機能に関してはWEB版をご利用ください」というメッセージとリンク（https://www.swim-hub.app/dashboard）を配置。

---

## 4. 優先度別 実装候補

### 高優先度

| 機能 | 理由 |
|------|------|
| ダッシュボードからの出欠登録 | チーム利用時に毎回チーム詳細画面に移動する手間を削減 |

### 中優先度

| 機能 | 理由 |
|------|------|
| ベストタイム表示（エントリー時） | エントリー登録時の参考情報として有用 |
| テンプレート機能 | 繰り返し入力の効率化 |
| 場所サジェスト | 入力の手間削減 |
| シェアカード機能 | 記録をSNSで共有したいユーザー向け |

### 低優先度

| 機能 | 理由 |
|------|------|
| 未保存確認ダイアログ | あると親切だが必須ではない |
| エントリーSKIP | 使用頻度が低い |
| 4段階役割管理 | 現状2段階で運用可能 |

---

## 5. 技術的な実装メモ

### クイック入力の実装

- ウェブ: `useQuickTimeInput` フック (`apps/web/components/forms/shared/TimeInput/hooks/useQuickTimeInput.ts`)
- モバイル: `useQuickTimeInput` フック (`apps/mobile/hooks/useQuickTimeInput.ts`)
- パーサー: `parseQuickTime` (`apps/shared/utils/quickTimeParser.ts`)

### 画像アップロードの実装

- ウェブ: `PracticeImageUploader`, `CompetitionImageUploader`
- モバイル: `ImageUploader` (`apps/mobile/components/shared/`)
- API: `/api/storage/images/*`

### テンプレート機能の実装

- ウェブ: `useCreatePracticeLogTemplateMutation`
- モーダル: `PracticeLogTemplateSelectModal`

### 練習ログタグ機能の実装

- モバイル: `TagChips`, `TagSelectModal`, `TagManageModal` (`apps/mobile/components/shared/`)
- 表示: `PracticeLogDetail` (`apps/mobile/components/calendar/DayDetailModal/components/`)
- DB: `practice_tags`, `practice_log_tags` テーブル
- API: `replace_practice_log_tags` RPC

### シェアカード機能の実装（Webのみ）

- モーダル: `ShareCardModal` (`apps/web/components/share/ShareCardModal.tsx`)
- 練習記録用: `PracticeShareCard` (`apps/web/components/share/PracticeShareCard.tsx`)
- 大会記録用: `CompetitionShareCard` (`apps/web/components/share/CompetitionShareCard.tsx`)
- 機能: SNS用の画像としてダウンロード、Web Share API対応

### 出欠管理の実装

- メンバー向け: `MyMonthlyAttendance` (Web/モバイル両方)
- 管理者向け: `AdminMonthlyAttendance` (Webのみ)
- ダッシュボード連携: `AttendanceSection`, `AttendanceModal` (Webのみ)
- API: `AttendanceAPI` (`@swim-hub/shared`)

---

*最終更新: 2026-02-04*
